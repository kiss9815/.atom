<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=EUC-KR"/>
    <title>Insert title here</title>
</head>
<script language="Javascript" src="/lts/template_interpark/common/etour_script.js"></script>
<script type="text/javascript" src="/global/js/jquery-1.7.2.min.js" charset="euc-kr"></script>
<script type="text/javascript" src="/global/js/jqgrid/jquery.jqGrid.min.js" charset="euc-kr"></script>
<script type="text/javascript" src="/global/js/jqgrid/grid.locale-kr.js" charset="utf-8"></script>
<script type="text/javascript" src="/global/js/jqgrid/jquery-ui-1.9.0.custom.min.js" charset="utf-8"></script>
<link href="/global/css/jquerytheme/base/jquery-ui.css" rel="stylesheet">
<link href='/lts/template_interpark/css/style.css' rel='stylesheet' type='text/css'>
<link href="/global/js/jqgrid/css/ui.multiselect.css" media="screen" rel="stylesheet">
<link href="/global/js/jqgrid/css/ui.jqgrid.css" media="screen" rel="stylesheet">
<link href='/lts/template_interpark/css/style.css' rel='stylesheet' type='text/css'>


<body>

    <table id="jqGrid"></table>
    <div id="jqGridPager"></div>
    <br>
    <table id="jqGridOption"></table>
    <div id="jqGridOptionPager"></div>
    <br>
    <table id="jqGridNonUse"></table>
    <div id="jqGridNonUsePager"></div>


    <table width="100%" cellpadding="0" cellspacing="0" border="0">
        <div id="popLayer">
            <p>
                * <strong>수정하고 싶은 리스트를 클릭시 수정 가능한 화면</strong>이 노출됩니다.
            </p>
            <p>
                * <strong>삭제는 체크박스 클릭 후 삭제버튼을 클릭시</strong> 삭제가 됩니다.
            </p>
            <p>* 신규 및 수정한 커미션 정보는 익일(24:00) 반영됩니다</p>
            <p>* 등록된 커미션 정보는 아마데우스 GDS를 통한 자동발권 예약건만 적용됩니다.</p>
            <p>* KE / TW / 7C / LJ / VJ / ZE 항공사만 등록이 가능합니다.</p>
            <div id="addContents" style="width: 915px">
                <h2>* 커미션 신규 추가</h2>
                <table style="margin-top: 20px;">
                    <colgroup>
                        <col width="15%">
                        <col width="15%">
                        <col width="15%">
                        <col width="15%">
                        <col width="15%">
                        <col width="15%">
                    </colgroup>
                    <thead>
                        <tr bgcolor="E7E7E7">
                            <th scope="col">항공사코드</th>
                            <th scope="col">커미션(%)</th>
                            <th scope="col">적용시작일</th>
                            <th scope="col">적용종료일</th>
                            <th scope="col">적용여부</th>
                            <th scope="col">추가</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" id="ADD_AIRLINE_CODE" class="text02 upperCase" maxlength="2"></td>
                            <td><input type="text" id="ADD_COMM_RATE" class="text02 numbersOnly" maxlength="2"></td>
                            <td><input type="text" id="ADD_APPLY_START_DATE" class="text02 numbersOnly" maxlength="8"></td>
                            <td><input type="text" id="ADD_APPLY_END_DATE" class="text02 numbersOnly" maxlength="8"></td>
                            <td>
                                <p align="center">적용(Y)</p> <input type="hidden" id="ADD_APPLY_YN" class="text02" maxlength="1" value="Y">
                            </td>
                            </td>
                            <td align="center"><input type="button" id="addUpdateBtn" value="추가하기" onclick="updateAirlinecode('I')"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div id="correctContents" style="display: none; width: 915px">
                <h2>* 커미션 수정</h2>
                <table style="margin-top: 20px">
                    <colgroup>
                        <col width="15%">
                        <col width="15%">
                        <col width="15%">
                        <col width="15%">
                        <col width="15%">
                        <col width="15%">
                    </colgroup>
                    <thead>
                        <tr bgcolor="E7E7E7">
                            <th scope="col">항공사코드</th>
                            <th scope="col">커미션(%)</th>
                            <th scope="col">적용시작일</th>
                            <th scope="col">적용종료일</th>
                            <th scope="col">적용여부</th>
                            <th scope="col">수정</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><input type="text" id="CORRECT_AIRLINE_CODE" class="text02 upperCase" disabled></td>
                            <td><input type="text" id="CORRECT_COMM_RATE" class="text02 numbersOnly" maxlength="2"></td>
                            <td><input type="text" id="CORRECT_APPLY_START_DATE" class="text02 numbersOnly" disabled></td>
                            <td><input type="text" id="CORRECT_APPLY_END_DATE" class="text02 numbersOnly" maxlength="8"></td>
                            <td align="center"><select id="CORRECT_APPLY_YN">
									<option value="N">미적용</option>
									<option value="Y">적용</option>
							</select></td>
                            <td align="center"><input type="button" id="addUpdateBtn" value="수정하기" onclick="updateAirlinecode('E')"></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <form id="searchForm" name="searchForm">
            <input type="hidden" id="SEARCH_TYPE" name="SEARCH_TYPE" value="I">
            </td> <input type="hidden" id="AIRLINE_CODE" class="text02" name="AIRLINE_CODE" maxlength="2">
            </td> <input type="hidden" id="COMM_RATE" class="text02" name="COMM_RATE">
            </td> <input type="hidden" id="APPLY_START_DATE" class="text02" name="APPLY_START_DATE" maxlength="8">
            </td> <input type="hidden" id="APPLY_END_DATE" class="text02" name="APPLY_END_DATE" maxlength="8">
            </td> <input type="hidden" id="APPLY_YN" class="text02" name="APPLY_YN">
            </td>
        </form>
    </table>


</body>

<script language="javascript">

jQuery(document).ready(function() {
    doQuery(); // 로드되면 바로 리스트 나오도록

});

function zerofill(i) {
    return (i < 10 ? '0' : '') + i;
}

jQuery('.numbersOnly').keyup(function() {
    this.value = this.value.replace(/[^0-9\.]/g, '');
});

jQuery('.upperCase').keyup(function() {
    this.value = this.value.toUpperCase()
});

var _localData = {
    showCommDisplay: false
};

var AModelName = [
    'PRIMARY_KEY', '항공사 코드', '적용시작일', '적용종료일', '커미션', '적용여부', '생성일', '생성자', '변경일', '변경자'
    ,'커미션타입','출발시작일','출발종료일','출발지코드','도착지코드','국가코드','제외클래스','제외편수','삭제'
]
var AModel = [
  {
    label: 'PRIMARY_KEY',  name: 'PRIMARY_KEY',  key: true,  hidden: true,  width: 10
}, {
  label: '항공사',  name: 'AIRLINE_CODE',  width: 8, align :'center'
}, {
    label: '적용시작일',  name: 'APPLY_START_DATE',  width: 10, align :'center', sorttype:'number'
}, {
    label: '적용종료일',  name: 'APPLY_END_DATE',  width: 10, align :'center', sorttype:'number'
}, {
    label: '커미션',  name: 'COMM_RATE',  width: 10, align :'center', sorttype:'number'
}, {
    label: '적용여부',  name: 'APPLY_YN',  width: 6 , align :'center',
    formatter: function(rowId, cellval, colpos, rwdat, _act) {
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1; //January is 0!
        var yyyy = today.getFullYear().toString();
        var yyyymmdd = yyyy + zerofill(mm).toString() + zerofill(dd).toString();
        if(colpos.APPLY_START_DATE > yyyymmdd ){
          return colpos.APPLY_YN + "(예정)";
        }else if (colpos.APPLY_END_DATE < yyyymmdd) {
            return colpos.APPLY_YN + "(만료)";
        }
        return colpos.APPLY_YN;
    }
}, {
    label: '생성일',  name: 'INPT_DATE',  width: 10, align :'center', hidden:true
}, {
    label: '생성자',  name: 'INPT_USER', width: 10, align :'center', hidden:true
}, {
    label: '변경일',  name: 'UPDT_DATE',  width: 10, align :'center', hidden:true
}, {
    label: '변경자',  name: 'UPDT_USER',  width: 10, align :'center', hidden:true
}, {
    label: '커미션타입',  name: 'COMM_TYPE',  width: 5, align :'center', hidden:true
},{
    label: '출발시작일',  name: 'DEP_START_DATE',  width: 8, align :'center', hidden:true
},{
    label: '출발종료일',  name: 'DEP_END_DATE',  width: 8, align :'center', hidden:true
},{
    label: '출발지코드',  name: 'DEP_CODE',  width: 8, align :'center', hidden:true
},{
    label: '도착지코드',  name: 'ARR_CODE',  width: 8, align :'center', hidden:true
},{
    label: '국가코드',  name: 'NATION_CODE',  width: 8, align :'center', hidden:true
},{
    label: '제외클래스',  name: 'EXCEPT_CLASS',  width: 8, align :'center', hidden:true
},{
    label: '제외편수',  name: 'EXCEPT_FLIGHT_NO',  width: 8, align :'center', hidden:true
},{
   name: 'DELETE_COM', sortable: false, align :'center', width: 5,
    formatter: function (rowId, cellval, colpos, rwdat, _act) {
      return  "<input type='button' id='"+ cellval.rowId +"deleteBtn"+"' value='삭제' class='btn' data-keyid= '"+ cellval.rowId +"' onClick='deleteCommData(this);' />";
   }
}

]

var OModelName = [
    'PRIMARY_KEY', '항공사 코드', '적용시작일', '적용종료일', '커미션', '적용여부', '생성일', '생성자', '변경일', '변경자'
    ,'커미션타입','출발시작일','출발종료일','출발지코드','도착지코드','국가코드','제외클래스','제외편수','삭제'
]
var OModel = [
  {
    label: 'PRIMARY_KEY',  name: 'PRIMARY_KEY',  key: true,  hidden: true,  width: 10
}, {
  label: '항공사',  name: 'AIRLINE_CODE',  width: 8, align :'center'
}, {
    label: '적용시작일',  name: 'APPLY_START_DATE',  width: 10, align :'center', sorttype:'number'
}, {
    label: '적용종료일',  name: 'APPLY_END_DATE',  width: 10, align :'center', sorttype:'number'
}, {
    label: '커미션',  name: 'COMM_RATE',  width: 10, align :'center', sorttype:'number'
}, {
    label: '적용여부',  name: 'APPLY_YN',  width: 6 , align :'center',
    formatter: function(rowId, cellval, colpos, rwdat, _act) {
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1; //January is 0!
        var yyyy = today.getFullYear().toString();
        var yyyymmdd = yyyy + zerofill(mm).toString() + zerofill(dd).toString();
        if(colpos.APPLY_START_DATE > yyyymmdd ){
          return colpos.APPLY_YN + "(예정)";
        }else if (colpos.APPLY_END_DATE < yyyymmdd) {
            return colpos.APPLY_YN + "(만료)";
        }
        return colpos.APPLY_YN;
    }
}, {
    label: '생성일',  name: 'INPT_DATE',  width: 10, align :'center', hidden:true
}, {
    label: '생성자',  name: 'INPT_USER', width: 10, align :'center', hidden:true
}, {
    label: '변경일',  name: 'UPDT_DATE',  width: 10, align :'center', hidden:true
}, {
    label: '변경자',  name: 'UPDT_USER',  width: 10, align :'center', hidden:true
}, {
    label: '커미션타입',  name: 'COMM_TYPE',  width: 5, align :'center'
},{
    label: '출발시작일',  name: 'DEP_START_DATE',  width: 8, align :'center'
},{
    label: '출발종료일',  name: 'DEP_END_DATE',  width: 8, align :'center'
},{
    label: '출발지코드',  name: 'DEP_CODE',  width: 8, align :'center'
},{
    label: '도착지코드',  name: 'ARR_CODE',  width: 8, align :'center'
},{
    label: '국가코드',  name: 'NATION_CODE',  width: 8, align :'center'
},{
    label: '제외클래스',  name: 'EXCEPT_CLASS',  width: 8, align :'center'
},{
    label: '제외편수',  name: 'EXCEPT_FLIGHT_NO',  width: 8, align :'center'
},{
   name: 'DELETE_COM', sortable: false, align :'center', width: 5,
    formatter: function (rowId, cellval, colpos, rwdat, _act) {
      return  "<input type='button' id='"+ cellval.rowId +"deleteBtn"+"' value='삭제' class='btn' data-keyid= '"+ cellval.rowId +"' onClick='deleteCommData(this);' />";
   }
}

]

var commonModel = [
  {
    label: 'PRIMARY_KEY',  name: 'PRIMARY_KEY',  key: true,  hidden: true,  width: 10
}, {
  label: '항공사',  name: 'AIRLINE_CODE',  width: 8, align :'center'
}, {
    label: '적용시작일',  name: 'APPLY_START_DATE',  width: 10, align :'center', sorttype:'number'
}, {
    label: '적용종료일',  name: 'APPLY_END_DATE',  width: 10, align :'center', sorttype:'number'
}, {
    label: '커미션',  name: 'COMM_RATE',  width: 10, align :'center', sorttype:'number'
}, {
    label: '적용여부',  name: 'APPLY_YN',  width: 6 , align :'center',
    formatter: function(rowId, cellval, colpos, rwdat, _act) {
        var today = new Date();
        var dd = today.getDate();
        var mm = today.getMonth() + 1; //January is 0!
        var yyyy = today.getFullYear().toString();
        var yyyymmdd = yyyy + zerofill(mm).toString() + zerofill(dd).toString();
        if(colpos.APPLY_START_DATE > yyyymmdd ){
          return colpos.APPLY_YN + "(예정)";
        }else if (colpos.APPLY_END_DATE < yyyymmdd) {
            return colpos.APPLY_YN + "(만료)";
        }
        return colpos.APPLY_YN;
    }
}, {
    label: '생성일',  name: 'INPT_DATE',  width: 10, align :'center', hidden:true
}, {
    label: '생성자',  name: 'INPT_USER', width: 10, align :'center', hidden:true
}, {
    label: '변경일',  name: 'UPDT_DATE',  width: 10, align :'center', hidden:true
}, {
    label: '변경자',  name: 'UPDT_USER',  width: 10, align :'center', hidden:true
}

function doQuery() {

    var captionTitle = "아마데우스 자동발권 커미션 관리";
    var colNames = AModelName;
    var colModel = AModel;

    jQuery("#jqGrid").jqGrid('GridUnload');

    jQuery("#jqGrid").jqGrid({
        url: "/lts/adminB/AmadeusCommList.lts",
        postData: {
            SEARCH_TYPE: 'R'
        },
        datatype: "json",
        jsonReader: {
            repeatitems: false,
            root: "result",
            page: "page",
            records: "records"
        },
        colNames: colNames,
        colModel: colModel,
        width: 1050,
        onSelectRow: function(rowid, status, iCol) {

            /** 하나만 체크박스 눌리도록 */
            if (rowid == _localData.lastSel) {
                jQuery(this).jqGrid("resetSelection");
                _localData.lastSel = undefined;
                status = false;
            } else {
                _localData.lastSel = rowid;
            }
            /** 하나만 체크박스 눌리도록 */
            if (status) {
                var rowData = jQuery("#jqGrid").getRowData(rowid)
                jQuery('#CORRECT_AIRLINE_CODE').val(rowData.AIRLINE_CODE);
                jQuery('#CORRECT_COMM_RATE').val(rowData.COMM_RATE);
                jQuery('#CORRECT_APPLY_START_DATE').val(rowData.APPLY_START_DATE);
                jQuery('#CORRECT_APPLY_END_DATE').val(rowData.APPLY_END_DATE);
                jQuery('#CORRECT_APPLY_YN').val(rowData.APPLY_YN);
                jQuery('#correctContents').show();
            } else {
                jQuery('#correctContents').hide();
            }

        },
        /*
        ondblClickRow: function (rowid, iRow, iCol) {
            var editableCells = ['COMM_RATE'];
            var colModels = $(this).getGridParam('colModel');
            var colName = colModels[iCol].name;
            if (editableCells.indexOf(colName) >= 0) {
                $(this).setColProp(colName, { editable: true });
                $(this).editCell(iRow, iCol, true);
            }
        },
        //에디트가 종료되면, 셀의 에디트 가능 여부를 false 로 돌린다.
        afterEditCell: function (rowid, cellname, value, iRow, iCol) {
            $(this).setColProp(cellname, { editable: false });
        },
        */
        loadComplete: function(data) {
            console.log(data)
            if(data.result){
              _localData.optionDatas = new Array();
              _localData.nonUseDatas = new Array();
              for(var i=0; i<data.result.length; i++){
                if(data.result[i].COMM_TYPE == "O"){
                  _localData.optionDatas.push(data.result[i]);
                  $('#jqGrid').jqGrid('delRowData',data.result[i].PRIMARY_KEY);
                }
                if(data.result[i].APPLY_YN == 'N'){
                  _localData.nonUseDatas.push(data.result[i]);
                  $('#jqGrid').jqGrid('delRowData',data.result[i].PRIMARY_KEY);
                }
              }

              _localData.totalDatas = data.result;
              jqGridLocal('Option');
              jqGridLocal('NonUse');
            }else{
              for(var i=0; i<data.rows.length; i++){
                if(data.rows[i].COMM_TYPE == "O"){
                  $('#jqGrid').jqGrid('delRowData',data.rows[i].PRIMARY_KEY);
                }
                if(data.rows[i].APPLY_YN == 'N'){
                  $('#jqGrid').jqGrid('delRowData',data.rows[i].PRIMARY_KEY);
                }
              }
            }


        },
        beforeSelectRow: function(rowId, e) {
            jQuery(this).jqGrid("resetSelection");
            return true;
        },
        cache: false,
        loadonce: true,
        rowNum: 20,
        width: 900,
        rowList: [10, 20, 30, 40, 50],
        pager: '#jqGridPager',
        hiddengrid: false,
        rownumbers: true,
        viewrecords: true,
        sortorder: "desc",
        height: "auto",
        //cellEdit:true,
        multiselect: true,
        multiboxonly: true,
        formatter: {
            integer: {
                thousandsSeparator: ",",
                defaultValue: 0
            }
        },
        caption: captionTitle
    }).navGrid('#jqGridPager', {
        edit: false, add: false, del: false
    });

    jQuery('#jqGrid').jqGrid('filterToolbar', {
        stringResult: true, searchOnEnter: false, searchOperators: true
    });

}

function jqGridLocal(gridName) {


    var colNames = OModelName;
    var colModel = OModel;

    var gridId = "#jqGrid"+gridName;
    var gridPager = "#jqGrid"+gridName+"Pager"
    var localData;
    var hidenGrid;
    var captionTitle;
    if(gridName == 'Option'){
      localData = _localData.optionDatas
      hidenGrid = false;
      captionTitle = "아마데우스 자동발권 커미션 추가 관리";
    }else{
      localData = _localData.nonUseDatas
      hidenGrid = true;
      captionTitle = "아마데우스 자동발권 커미션 미사용 리스트";
    }


    jQuery(gridId).jqGrid('GridUnload');

    jQuery(gridId).jqGrid({
        datatype: 'local',
        data:localData,
        localReader: {
            repeatitems: false
        },
        colNames: colNames,
        colModel: colModel,
        width: 1050,
        onSelectRow: function(rowid, status, iCol) {

            /** 하나만 체크박스 눌리도록 */
            if (rowid == _localData.lastSel) {
                jQuery(this).jqGrid("resetSelection");
                _localData.lastSel = undefined;
                status = false;
            } else {
                _localData.lastSel = rowid;
            }
            /** 하나만 체크박스 눌리도록 */
            if (status) {
                var rowData = jQuery(gridId).getRowData(rowid)
                jQuery('#CORRECT_AIRLINE_CODE').val(rowData.AIRLINE_CODE);
                jQuery('#CORRECT_COMM_RATE').val(rowData.COMM_RATE);
                jQuery('#CORRECT_APPLY_START_DATE').val(rowData.APPLY_START_DATE);
                jQuery('#CORRECT_APPLY_END_DATE').val(rowData.APPLY_END_DATE);
                jQuery('#CORRECT_APPLY_YN').val(rowData.APPLY_YN);
                jQuery('#correctContents').show();
            } else {
                jQuery('#correctContents').hide();
            }

        },
        loadComplete: function(data) {
            console.log(data)
        },
        beforeSelectRow: function(rowId, e) {
            jQuery(this).jqGrid("resetSelection");
            return true;
        },
        cache: false,
        loadonce: true,
        rowNum: 20,
        width: 900,
        rowList: [10, 20, 30, 40, 50],
        pager: gridPager,
        hiddengrid: hidenGrid,
        rownumbers: true,
        viewrecords: true,
        sortorder: "desc",
        height: "auto",
        //cellEdit:true,
        multiselect: true,
        multiboxonly: true,
        formatter: {
            integer: {
                thousandsSeparator: ",",
                defaultValue: 0
            }
        },
        caption: captionTitle
    }).navGrid(gridPager, {
        edit: false, add: false, del: false
    });

    jQuery(gridId).jqGrid('filterToolbar', {
        stringResult: true, searchOnEnter: false, searchOperators: true
    });

}


function updateAirlinecode(SEARCH_TYPE) {
    jQuery('#SEARCH_TYPE').val(SEARCH_TYPE);

    if (SEARCH_TYPE == 'E') {
        jQuery('#AIRLINE_CODE').val(jQuery('#CORRECT_AIRLINE_CODE').val().toUpperCase());
        jQuery('#COMM_RATE').val(jQuery('#CORRECT_COMM_RATE').val());
        jQuery('#APPLY_START_DATE').val(jQuery('#CORRECT_APPLY_START_DATE').val());
        jQuery('#APPLY_END_DATE').val(jQuery('#CORRECT_APPLY_END_DATE').val());
        jQuery('#APPLY_YN').val(jQuery('#CORRECT_APPLY_YN').val());
    } else {
        jQuery('#AIRLINE_CODE').val(jQuery('#ADD_AIRLINE_CODE').val().toUpperCase());
        jQuery('#COMM_RATE').val(jQuery('#ADD_COMM_RATE').val());
        jQuery('#APPLY_START_DATE').val(jQuery('#ADD_APPLY_START_DATE').val());
        jQuery('#APPLY_END_DATE').val(jQuery('#ADD_APPLY_END_DATE').val());
        jQuery('#APPLY_YN').val(jQuery('#ADD_APPLY_YN').val());
    }

    var checkAirlineCode = "KE/TW/7C/LJ/VJ/ZE";

    if (checkAirlineCode.indexOf(jQuery('#AIRLINE_CODE').val()) < 0) {
        alert("KE/TW/7C/LJ/VJ/ZE 항공사만 등록가능합니다");
        return;
    }


    if (jQuery('#COMM_RATE').val() == '') {
        alert("커미션을 입력해주세요");
        return;
    }
    if (jQuery('#APPLY_START_DATE').val() == '') {
        alert("적용시작일자를 입력해주세요");
        return;
    }

    if (jQuery('#APPLY_END_DATE').val() == '') {
        alert("적용종료일자를 입력해주세요");
        return;
    }

    if (parseInt(jQuery('#APPLY_START_DATE').val()) > parseInt(jQuery('#APPLY_END_DATE').val())) {
        alert("시작일자가 종료일자보다 큽니다.");
        return;
    }

    var form = jQuery("#searchForm").serialize();

    jQuery.ajax({ //Jquery  Ajax
        type: "post",
        url: "/lts/adminB/AmadeusCommList.lts",
        data: form,
        cache: false,
        dataType: 'json',
        success: function(data) {
            var code = data.code;
            if (code == 1) {
                doQuery();
                alert("데이터를 업데이트 했습니다.");
            } else if (code == 0) {
                alert("변경된 데이터가 없습니다.");
            } else if (code == -3) {
                alert("같은 항공사에 적용시작일자와 적용종료일자가 중복된 데이터가 있습니다.");
            } else {
                alert(data.message);
            }

        },
        error: function(data) {
            alert("네트워크 에러 및 예측하지 못한 에러");
        }
    });
}

function deleteCommData(cellValue) {
    var keyCheck = jQuery("#jqGrid").jqGrid('getGridParam', 'selarrrow');

    if(keyCheck.length < 1 ){
      alert("체크박스 선택후 삭제 바랍니다.")
      return;
    }

    var key = cellValue.dataset.keyid;

    if(keyCheck[0] !== key ){
      alert("체크한 행의 삭제버튼이 아닙니다. 다시 삭제버튼 눌러주십시오.")
      return;
    }


    var con = confirm("선택한 " + key + " 커미션 정보를 삭제하시겠습니까?")
    if (con) {

    } else {
        return;
    }

    jQuery.ajax({ //Jquery  Ajax
        type: "post",
        url: "/lts/adminB/AmadeusCommList.lts",
        data: {
            'SEARCH_TYPE': 'D',
            'PRIMARY_KEY': key
        },
        cache: false,
        dataType: 'json',
        success: function(data) {
            var code = data.code;
            if (code == 1) {
                doQuery();
                alert("데이터를 삭제 했습니다.");
            } else {
                alert(data.message);
            }

        },
        error: function(data) {
            alert("네트워크 에러 및 예측하지 못한 에러");
        }
    });
}

jQuery(window).bind('resize', function(){
 	    jQuery("#jqGrid").setGridWidth(jQuery(window).width()-40);
      jQuery("#jqGridOption").setGridWidth(jQuery(window).width()-40);
 	}).trigger('resize');

</script>

</html>
